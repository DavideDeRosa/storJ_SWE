openapi: "3.0.0"
info:
  title: StorjApi
  description: StorjApi
  version: 1.0.0
servers:
  - url: '/api/v1'
tags:
  - name: Utenti
  - name: Storie
  - name: Scenari
  - name: Scelte
  - name: Oggetti
  - name: Partite

paths:

  '/utenti':
    post:
      tags:
        - "Utenti"
      operationId: postUtente
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Utente"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Utente"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/utenti/{usernameUtente}':
    get:
      tags:
        - "Utenti"
      operationId: getUtenteByUsername
      parameters:
        - in: path
          name: usernameUtente
          required: true
          description: "username dell'utente"
          schema:
            type: string
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Utente"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/utenti/{usernameUtente}/pagamento':
    post:
      tags:
        - "Utenti"
      operationId: utentePayment
      parameters:
        - in: path
          name: usernameUtente
          required: true
          description: "username dell'utente"
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaymentRequest"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Utente"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/storie':
    post:
      tags:
        - "Storie"
      operationId: postStoria
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Storia"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Storia"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    get:
      tags:
        - "Storie"
      operationId: getStorie
      parameters:
        - name: autore
          in: query
          description: 'filtro autore'
          schema:
            type: string
          required: false
        - name: categoria
          in: query
          description: 'filtro categoria'
          schema:
            type: string
          required: false
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Storia"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/storie/{idStoria}':
    get:
      tags:
        - "Storie"
      operationId: getStoriaById
      parameters:
        - in: path
          name: idStoria
          required: true
          description: "ID della storia"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Storia"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Storie"
      operationId: putStoria
      parameters:
        - in: path
          name: idStoria
          required: true
          description: "ID della storia"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Storia"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Storia"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Storie"
      operationId: deleteStoria
      parameters:
        - in: path
          name: idStoria
          required: true
          description: "ID della storia"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scenari':
    post:
      tags:
        - "Scenari"
      operationId: postScenario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Scenario"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Scenario"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/storie/{idStoria}/scenari':
    get:
      tags:
        - "Scenari"
      operationId: getScenariByStoria
      parameters:
        - in: path
          name: idStoria
          required: true
          description: "ID della storia"
          schema:
            type: integer
            format: int64
        - in: query
          name: tipologia
          description: 'tipo scenario'
          schema:
            type: string
          required: false
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Scenario"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scenari/{idScenario}':
    get:
      tags:
        - "Scenari"
      operationId: getScenarioById
      parameters:
        - in: path
          name: idScenario
          required: true
          description: "ID dello scenario"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Scenario"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Scenari"
      operationId: putScenario
      parameters:
        - in: path
          name: idScenario
          required: true
          description: "ID dello scenario"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Scenario"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Scenario"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Scenari"
      operationId: deleteScenario
      parameters:
        - in: path
          name: idScenario
          required: true
          description: "ID dello scenario"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/drop':
    post:
      tags:
        - "Scenari"
      operationId: postDrop
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Drop"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Drop"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scenari/{idScenario}/drop':
    get:
      tags:
        - "Scenari"
      operationId: getDropByScenario
      parameters:
        - in: path
          name: idScenario
          required: true
          description: "ID dello scenario"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Drop"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/drop/{idDrop}':
    get:
      tags:
        - "Scenari"
      operationId: getDropById
      parameters:
        - in: path
          name: idDrop
          required: true
          description: "ID del drop"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Drop"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Scenari"
      operationId: putDrop
      parameters:
        - in: path
          name: idDrop
          required: true
          description: "ID del drop"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Drop"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Drop"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Scenari"
      operationId: deleteDrop
      parameters:
        - in: path
          name: idDrop
          required: true
          description: "ID del drop"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scelte/multipla':
    post:
      tags:
        - "Scelte"
      operationId: postSceltaMultipla
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Multipla"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Multipla"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scelte/indovinello':
    post:
      tags:
        - "Scelte"
      operationId: postSceltaIndovinello
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Indovinello"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Indovinello"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scenari/{idScenario}/scelte/multipla':
    get:
      tags:
        - "Scelte"
      operationId: getScelteMultipleByScenario
      parameters:
        - in: path
          name: idScenario
          required: true
          description: "ID dello scenario"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Multipla"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scenari/{idScenario}/scelte/indovinello':
    get:
      tags:
        - "Scelte"
      operationId: getSceltaIndovinelloByScenario
      parameters:
        - in: path
          name: idScenario
          required: true
          description: "ID dello scenario"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Indovinello"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scelte/{idScelta}/multipla':
    get:
      tags:
        - "Scelte"
      operationId: getSceltaMultiplaById
      parameters:
        - in: path
          name: idScelta
          required: true
          description: "ID della scelta"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Multipla"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Scelte"
      operationId: putSceltaMultipla
      parameters:
        - in: path
          name: idScelta
          required: true
          description: "ID della scelta"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Multipla"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Multipla"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Scelte"
      operationId: deleteSceltaMultipla
      parameters:
        - in: path
          name: idScelta
          required: true
          description: "ID della scelta"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/scelte/{idScelta}/indovinello':
    get:
      tags:
        - "Scelte"
      operationId: getSceltaIndovinelloById
      parameters:
        - in: path
          name: idScelta
          required: true
          description: "ID della scelta"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Indovinello"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Scelte"
      operationId: putSceltaIndovinello
      parameters:
        - in: path
          name: idScelta
          required: true
          description: "ID della scelta"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Indovinello"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Indovinello"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Scelte"
      operationId: deleteSceltaIndovinello
      parameters:
        - in: path
          name: idScelta
          required: true
          description: "ID della scelta"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/oggetti':
    post:
      tags:
        - "Oggetti"
      operationId: postOggetto
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Oggetto"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Oggetto"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/storie/{idStoria}/oggetti':
    get:
      tags:
        - "Oggetti"
      operationId: getOggettiByStoria
      parameters:
        - in: path
          name: idStoria
          required: true
          description: "ID della storia"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Oggetto"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/oggetti/{idOggetto}':
    get:
      tags:
        - "Oggetti"
      operationId: getOggettoById
      parameters:
        - in: path
          name: idOggetto
          required: true
          description: "ID dell'oggetto"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Oggetto"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Oggetti"
      operationId: putOggetto
      parameters:
        - in: path
          name: idOggetto
          required: true
          description: "ID dell'oggetto"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Oggetto"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Oggetto"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Oggetti"
      operationId: deleteOggetto
      parameters:
        - in: path
          name: idOggetto
          required: true
          description: "ID dell'oggetto"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/partite':
    post:
      tags:
        - "Partite"
      operationId: postPartita
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Partita"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Partita"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/utenti/{idUtente}/partite':
    get:
      tags:
        - "Partite"
      operationId: getPartiteByUtente
      parameters:
        - in: path
          name: idUtente
          required: true
          description: "ID dell'utente"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Partita"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

  '/partite/{idPartita}':
    get:
      tags:
        - "Partite"
      operationId: getPartitaById
      parameters:
        - in: path
          name: idPartita
          required: true
          description: "ID della partita"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Partita"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    put:
      tags:
        - "Partite"
      operationId: putPartita
      parameters:
        - in: path
          name: idPartita
          required: true
          description: "ID della partita"
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Partita"
      responses:
        '200':
          description: "Success"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Partita"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    delete:
      tags:
        - "Partite"
      operationId: deletePartita
      parameters:
        - in: path
          name: idPartita
          required: true
          description: "ID della partita"
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: "Success"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '401':
          description: "Unauthorized"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '500':
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
        '503':
          description: "Service Unavailable"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"

components:

  schemas:

    TipoRispostaEnum:
      type: string
      enum:
        - INDOVINELLO
        - MULTIPLA

    TipoScenarioEnum:
      type: string
      enum:
        - INIZIALE
        - NORMALE
        - FINALE

    Utente:
      type: object
      required:
        - id
        - username
        - password
        - statoPagamento
      properties:
        id:
          type: integer
          format: int64
        username:
          type: string
        password:
          type: string
        statoPagamento:
          type: boolean
          default: false

    PaymentRequest:
      type: object
      required:
        - amount
        - cardHolder
        - cardNumber
        - cvv
      properties:
        amount:
          type: number
          format: double
        cardHolder:
          type: string
        cardNumber:
          type: string
        cvv:
          type: string

    Storia:
      type: object
      required:
        - id
        - id_creatore
        - titolo
        - categoria
        - numero_scenari
        - statoCompletamento
      properties:
        id:
          type: integer
          format: int64
        id_creatore:
          type: integer
          format: int64
        titolo:
          type: string
        categoria:
          type: string
        numero_scenari:
          type: integer
          default: 0
        statoCompletamento:
          type: boolean
          default: false

    Scenario:
      type: object
      required:
        - id
        - id_storia
        - testo
        - tipo_risposta
        - tipo_scenario
      properties:
        id:
          type: integer
          format: int64
        id_storia:
          type: integer
          format: int64
        testo:
          type: string
        tipo_risposta:
          $ref: "#/components/schemas/TipoRispostaEnum"
        tipo_scenario:
          $ref: "#/components/schemas/TipoScenarioEnum"

    Drop:
      type: object
      required:
        - id
        - id_scenario
        - id_oggetto
      properties:
        id:
          type: integer
          format: int64
        id_scenario:
          type: integer
          format: int64
        id_oggetto:
          type: integer
          format: int64

    Multipla:
      type: object
      required:
        - id
        - id_scenario
        - testo
        - id_scenario_successivo
      properties:
        id:
          type: integer
          format: int64
        id_scenario:
          type: integer
          format: int64
        testo:
          type: string
        id_scenario_successivo:
          type: integer
          format: int64

    Required:
      type: object
      required:
        - id
        - id_scelta
        - id_oggetto
      properties:
        id:
          type: integer
          format: int64
        id_scelta:
          type: integer
          format: int64
        id_oggetto:
          type: integer
          format: int64

    Indovinello:
      type: object
      required:
        - id
        - id_scenario
        - testo
        - risposta
        - id_scenario_risposta_corretta
        - id_scenario_risposta_sbagliata
      properties:
        id:
          type: integer
          format: int64
        id_scenario:
          type: integer
          format: int64
        testo:
          type: string
        risposta:
          type: string
        id_scenario_risposta_corretta:
          type: integer
          format: int64
        id_scenario_risposta_sbagliata:
          type: integer
          format: int64

    Oggetto:
      type: object
      required:
        - id
        - id_storia
        - nome
        - descrizione
      properties:
        id:
          type: integer
          format: int64
        id_storia:
          type: integer
          format: int64
        nome:
          type: string
        descrizione:
          type: string

    Inventario:
      type: object
      required:
        - id
        - id_storia
        - id_utente
        - id_oggetto
      properties:
        id:
          type: integer
          format: int64
        id_storia:
          type: integer
          format: int64
        id_utente:
          type: integer
          format: int64
        id_oggetto:
          type: integer
          format: int64

    Partita:
      type: object
      required:
        - id
        - id_storia
        - id_utente
        - id_scenario_corrente
        - id_inventario
      properties:
        id:
          type: integer
          format: int64
        id_storia:
          type: integer
          format: int64
        id_utente:
          type: integer
          format: int64
        id_scenario_corrente:
          type: integer
          format: int64
        id_inventario:
          type: integer
          format: int64

    Error:
      type: object
      required:
        - code
        - message
      properties:
        code:
          type: string
        message:
          type: string